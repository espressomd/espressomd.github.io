
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>2. Installation &#8212; ESPResSo documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/bibtex.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Setting up the system" href="system_setup.html" />
    <link rel="prev" title="1. Introduction" href="introduction.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="system_setup.html" title="3. Setting up the system"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="1. Introduction"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ESPResSo doc</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ug.html" accesskey="U">&lt;no title&gt;</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation">
<span id="id1"></span><h1>2. Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>This chapter will describe how to get, compile and run the software.</p>
<p><em>ESPResSo</em> releases are available as source code packages from the homepage <a class="footnote-reference brackets" href="#id26" id="id2">1</a>.
This is where new users should get the code. The code within release packages
is tested and known to run on a number of platforms.
Alternatively, people that want to use the newest features of <em>ESPResSo</em> or that
want to start contributing to the software can instead obtain the
current development code via the version control system software  <a class="footnote-reference brackets" href="#id27" id="id3">2</a>
from <em>ESPResSo</em>’s project page at Github  <a class="footnote-reference brackets" href="#id28" id="id4">3</a>. This code might be not as well
tested and documented as the release code; it is recommended to use this
code only if you have already gained some experience in using <em>ESPResSo</em>.</p>
<p>Unlike most other software, no binary distributions of <em>ESPResSo</em> are available,
and the software is usually not installed globally for all users.
Instead, users of <em>ESPResSo</em> should compile the software themselves. The reason for
this is that it is possible to activate and deactivate various features
before compiling the code. Some of these features are not compatible
with each other, and some of the features have a profound impact on the
performance of the code. Therefore it is not possible to build a single
binary that can satisfy all needs. For performance reasons a user
should always activate only those features that are actually needed.
This means, however, that learning how to compile is a necessary evil.
The build system of <em>ESPResSo</em> uses <code class="docutils literal notranslate"><span class="pre">cmake</span></code> <a class="footnote-reference brackets" href="#id29" id="id5">4</a> to compile
software easily on a wide range of platforms.</p>
<div class="section" id="requirements">
<span id="id6"></span><h2>2.1. Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The following tools libraries, including header files, are required to be able
to compile and use <em>ESPResSo</em>:</p>
<dl class="simple">
<dt>CMake</dt><dd><p>The build system is based on CMake</p>
</dd>
<dt>C++ Compiler</dt><dd><p>C++14 capable C++ compiler (e.g., gcc 5 or later)</p>
</dd>
<dt>Boost</dt><dd><p>A number of advanced C++ features used by <em>ESPResSo</em> are provided by Boost.
We strongly recommend to use at least boost 1.67.</p>
</dd>
<dt>FFTW</dt><dd><p>For some algorithms (P<span class="math notranslate nohighlight">\(^3\)</span>M), <em>ESPResSo</em> needs the FFTW library
version 3 or later  <a class="footnote-reference brackets" href="#id30" id="id7">5</a> for Fourier transforms, including header
files.</p>
</dd>
<dt>MPI</dt><dd><p>Because <em>ESPResSo</em> is parallelized with MPI, you need a working MPI
environment that implements the MPI standard version 1.2.</p>
</dd>
<dt>Python</dt><dd><p><em>ESPResSo</em>’s main user interface is via the Python 3 scripting interface.</p>
</dd>
<dt>Cython</dt><dd><p>Cython is used for connecting the C++ core to Python.
At least version 0.23 is required.</p>
</dd>
</dl>
<div class="section" id="installing-requirements-on-ubuntu-linux">
<span id="id8"></span><h3>2.1.1. Installing requirements on Ubuntu Linux<a class="headerlink" href="#installing-requirements-on-ubuntu-linux" title="Permalink to this headline">¶</a></h3>
<p>To make <em>ESPResSo</em> run on 18.04 LTS, its dependencies can be installed with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install build-essential cmake cython3 python3-numpy <span class="se">\</span>
  libboost-all-dev openmpi-common fftw3-dev libhdf5-dev libhdf5-openmpi-dev <span class="se">\</span>
  python3-opengl libgsl-dev
</pre></div>
</div>
<p>Optionally the ccmake utility can be installed for easier configuration:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install cmake-curses-gui
</pre></div>
</div>
<p>To run the tutorials and generate the documentation, additional Python packages
are required:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install python3-matplotlib python3-scipy ipython3 jupyter-notebook
sudo pip3 install <span class="s1">&#39;pint&gt;=0.9&#39;</span>
</pre></div>
</div>
<p>If your computer has an Nvidia graphics card, you should also download and install the
CUDA SDK to make use of GPU computation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install nvidia-cuda-toolkit
</pre></div>
</div>
<p>On Ubuntu 18.04, you need to modify a file to make CUDA work with the default compiler:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo sed -i <span class="s1">&#39;s/__GNUC__ &gt; 6/__GNUC__ &gt; 7/g&#39;</span> /usr/include/crt/host_config.h
sudo sed -i <span class="s1">&#39;s/than 6/than 7/g&#39;</span> /usr/include/crt/host_config.h
</pre></div>
</div>
<p>If your computer has an AMD graphics card, you should also download and install the
ROCm SDK to make use of GPU computation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget -qO - http://repo.radeon.com/rocm/apt/debian/rocm.gpg.key <span class="p">|</span> sudo apt-key add -
<span class="nb">echo</span> <span class="s1">&#39;deb [arch=amd64] http://repo.radeon.com/rocm/apt/debian/ xenial main&#39;</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/rocm.list
sudo apt update
sudo apt install libnuma-dev rocm-dkms rocblas rocfft rocrand rocthrust
</pre></div>
</div>
<p>After installing the ROCm SDK, please reboot your computer.</p>
</div>
<div class="section" id="installing-requirements-on-other-linux-distributions">
<span id="id9"></span><h3>2.1.2. Installing requirements on other Linux distributions<a class="headerlink" href="#installing-requirements-on-other-linux-distributions" title="Permalink to this headline">¶</a></h3>
<p>Please refer to the following Dockerfiles to find the minimum set of packages
required to compile <em>ESPResSo</em> on other Linux distributions:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/espressomd/docker/blob/master/docker/centos-python3/Dockerfile-7">CentOS 7</a></p></li>
<li><p><a class="reference external" href="https://github.com/espressomd/docker/blob/master/docker/centos-python3/Dockerfile-next">Fedora 30</a></p></li>
<li><p><a class="reference external" href="https://github.com/espressomd/docker/blob/master/docker/debian-python3/Dockerfile-10">Debian 10</a></p></li>
<li><p><a class="reference external" href="https://github.com/espressomd/docker/blob/master/docker/opensuse/Dockerfile-15.1">OpenSUSE Leap 15.1</a></p></li>
</ul>
</div>
<div class="section" id="installing-requirements-on-mac-os-x">
<span id="id10"></span><h3>2.1.3. Installing requirements on Mac OS X<a class="headerlink" href="#installing-requirements-on-mac-os-x" title="Permalink to this headline">¶</a></h3>
<div class="section" id="preparation">
<h4>2.1.3.1. Preparation<a class="headerlink" href="#preparation" title="Permalink to this headline">¶</a></h4>
<p>To make <em>ESPResSo</em> run on Mac OS X 10.9 or higher, you need to install its
dependencies. There are two possibilities for this, MacPorts and Homebrew.
We recommend MacPorts, but if you already have Homebrew installed, you can use
that too. To check whether you already have one or the other installed, run the
following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">test</span> -e /opt/local/bin/port <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;MacPorts is installed&quot;</span>
<span class="nb">test</span> -e /usr/local/bin/brew <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;Homebrew is installed&quot;</span>
</pre></div>
</div>
<p>If both are installed, you need to remove one of the two. To do that, run one
of the following two commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo port -f uninstall installed <span class="o">&amp;&amp;</span> rm -r /opt/local
ruby -e <span class="s2">&quot;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>If Homebrew is already installed, you should resolve any problems reported by
the command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew doctor
</pre></div>
</div>
<p>If Anaconda Python or the Python from www.python.org are installed, you
will likely not be able to run <em>ESPResSo</em>. Therefore, please uninstall them
using the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo rm -r ~/anaconda<span class="o">[</span><span class="m">23</span><span class="o">]</span>
sudo rm -r /Library/Python
</pre></div>
</div>
<p>If you want to install MacPorts, download the installer package
appropriate for your Mac OS X version from
<a class="reference external" href="https://www.macports.org/install.php">https://www.macports.org/install.php</a> and install it.</p>
<p>If you want to install Homebrew, use the following commands.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo xcode-select --install
sudo xcodebuild -license accept
/usr/bin/ruby -e <span class="s2">&quot;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="installing-packages-using-macports">
<h4>2.1.3.2. Installing packages using MacPorts<a class="headerlink" href="#installing-packages-using-macports" title="Permalink to this headline">¶</a></h4>
<p>Run the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo xcode-select --install
sudo xcodebuild -license accept
sudo port selfupdate
sudo port install cmake python37 py37-cython py37-numpy <span class="se">\</span>
  openmpi-default fftw-3 +openmpi boost +openmpi +python37 <span class="se">\</span>
  doxygen py37-opengl py37-sphinx gsl hdf5 +openmpi <span class="se">\</span>
  py37-matplotlib py37-ipython py37-jupyter
sudo port <span class="k">select</span> --set cython cython37
sudo port <span class="k">select</span> --set python3 python37
sudo port <span class="k">select</span> --set mpi openmpi-mp
</pre></div>
</div>
</div>
<div class="section" id="installing-packages-using-homebrew">
<h4>2.1.3.3. Installing packages using Homebrew<a class="headerlink" href="#installing-packages-using-homebrew" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew install cmake python cython boost boost-mpi fftw <span class="se">\</span>
  doxygen gsl numpy ipython jupyter
brew install hdf5
brew link --force cython
pip install PyOpenGL matplotlib
</pre></div>
</div>
</div>
<div class="section" id="installing-cuda">
<h4>2.1.3.4. Installing CUDA<a class="headerlink" href="#installing-cuda" title="Permalink to this headline">¶</a></h4>
<p>If your Mac has an Nvidia graphics card, you should also download and install the
CUDA SDK <a class="footnote-reference brackets" href="#id31" id="id11">6</a> to make use of GPU computation.</p>
</div>
</div>
</div>
<div class="section" id="quick-installation">
<span id="id12"></span><h2>2.2. Quick installation<a class="headerlink" href="#quick-installation" title="Permalink to this headline">¶</a></h2>
<p>If you have installed the requirements (see section <a class="reference internal" href="#requirements"><span class="std std-ref">Requirements</span></a>) in
standard locations, compiling <em>ESPResSo</em> is usually only a matter of creating a build
directory and calling <code class="docutils literal notranslate"><span class="pre">cmake</span></code> and <code class="docutils literal notranslate"><span class="pre">make</span></code> in it. See for example the command
lines below (optional steps which modify the build process are commented out):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
<span class="c1">#cp myconfig-default.hpp myconfig.hpp # use the default configuration as template</span>
<span class="c1">#nano myconfig.hpp                    # edit to add/remove features as desired</span>
cmake ..
<span class="c1">#ccmake . // in order to add/remove features like ScaFaCoS or CUDA</span>
make
</pre></div>
</div>
<p>This will build <em>ESPResSo</em> with a default feature set, namely
<code class="file docutils literal notranslate"><span class="pre">src/config/myconfig-default.hpp</span></code>. This file is a C++ header file,
which defines the features that should be compiled in.
You may want to adjust the feature set to your needs. This can be easily done
by copying the <code class="file docutils literal notranslate"><span class="pre">myconfig-sample.hpp</span></code> which has been created in the <code class="file docutils literal notranslate"><span class="pre">build</span></code>
directory to <code class="file docutils literal notranslate"><span class="pre">myconfig.hpp</span></code> and only uncomment the features you want to use in your simulation.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">cmake</span></code> command looks for libraries and tools needed by <em>ESPResSo</em>. So <em>ESPResSo</em>
can only be built if <code class="docutils literal notranslate"><span class="pre">cmake</span></code> reports no errors.</p>
<p>The command <code class="docutils literal notranslate"><span class="pre">make</span></code> will compile the source code. Depending on the
options passed to the program, <code class="docutils literal notranslate"><span class="pre">make</span></code> can also be used for a number of
other things:</p>
<ul class="simple">
<li><p>It can install and uninstall the program to some other directories.
However, normally it is not necessary to actually <em>install</em> to run
it: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code></p></li>
<li><p>It can invoke code checks: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">check</span></code></p></li>
<li><p>It can build this documentation: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">sphinx</span></code></p></li>
</ul>
<p>When these steps have successfully completed, <em>ESPResSo</em> can be started with the
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./pypresso &lt;SCRIPT&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;SCRIPT&gt;</span></code> is a <code class="docutils literal notranslate"><span class="pre">python</span></code> script which has to
be written by the user. You can find some examples in the <code class="file docutils literal notranslate"><span class="pre">samples</span></code>
folder of the source code directory. If you want to run in parallel, you should
have compiled with <em>Open MPI</em>, and need to tell MPI to run in parallel. The actual
invocation is implementation dependent, but in many cases, such as
<em>Open MPI</em>, you can use</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpirun -n &lt;N&gt; ./pypresso &lt;SCRIPT&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;N&gt;</span></code> is the number of processors to be used.</p>
</div>
<div class="section" id="configuring">
<span id="id13"></span><h2>2.3. Configuring<a class="headerlink" href="#configuring" title="Permalink to this headline">¶</a></h2>
<div class="section" id="myconfig-hpp-activating-and-deactivating-features">
<span id="id14"></span><h3>2.3.1. <code class="file docutils literal notranslate"><span class="pre">myconfig.hpp</span></code>: Activating and deactivating features<a class="headerlink" href="#myconfig-hpp-activating-and-deactivating-features" title="Permalink to this headline">¶</a></h3>
<p><em>ESPResSo</em> has a large number of features that can be compiled into the binary.
However, it is not recommended to actually compile in all possible
features, as this will slow down <em>ESPResSo</em> significantly. Instead, compile in only
the features that are actually required. A strong gain in speed can be
achieved by disabling all non-bonded interactions except for a single
one, e.g. <code class="docutils literal notranslate"><span class="pre">LENNARD_JONES</span></code>. For developers, it is also possible to turn on or off a
number of debugging messages. The features and debug messages can be
controlled via a configuration header file that contains C-preprocessor
declarations. Subsection <a class="reference internal" href="#features"><span class="std std-ref">Features</span></a> describes all available features. If a
file named <code class="file docutils literal notranslate"><span class="pre">myconfig.hpp</span></code> is present in the build directory when <code class="docutils literal notranslate"><span class="pre">cmake</span></code>
is run, all features defined in it will be compiled in. If no such file exists,
the configuration file <code class="file docutils literal notranslate"><span class="pre">src/config/myconfig-default.hpp</span></code> will be used
instead, which turns on the default features.</p>
<p>When you distinguish between the build and the source directory, the
configuration header can be put in either of these. Note, however, that
when a configuration header is found in both directories, the one in the
build directory will be used.</p>
<p>By default, the configuration header is called <code class="file docutils literal notranslate"><span class="pre">myconfig.hpp</span></code>.
The configuration header can be used to compile different binary
versions of with a different set of features from the same source
directory. Suppose that you have a source directory <code class="file docutils literal notranslate"><span class="pre">$srcdir</span></code> and two
build directories <code class="file docutils literal notranslate"><span class="pre">$builddir1</span></code> and <code class="file docutils literal notranslate"><span class="pre">$builddir2</span></code> that contain
different configuration headers:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">$builddir1/myconfig.hpp</span></code>:</p></li>
</ul>
<blockquote>
<div><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#define ELECTROSTATICS</span>
<span class="cp">#define LENNARD_JONES</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">$builddir2/myconfig.hpp</span></code>:</p></li>
</ul>
<blockquote>
<div><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#define LJCOS</span>
</pre></div>
</div>
</div></blockquote>
<p>Then you can simply compile two different versions of <em>ESPResSo</em> via:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> builddir1
cmake ..
make

<span class="nb">cd</span> builddir2
cmake ..
make
</pre></div>
</div>
<p>To see what features were activated in <code class="file docutils literal notranslate"><span class="pre">myconfig.hpp</span></code>, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./pypresso
</pre></div>
</div>
<p>and then in the Python interpreter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">espressomd</span>
<span class="nb">print</span><span class="p">(</span><span class="n">espressomd</span><span class="o">.</span><span class="n">features</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="features">
<span id="id15"></span><h2>2.4. Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>This chapter describes the features that can be activated in <em>ESPResSo</em>. Even if
possible, it is not recommended to activate all features, because this
will negatively effect <em>ESPResSo</em>’s performance.</p>
<p>Features can be activated in the configuration header <code class="file docutils literal notranslate"><span class="pre">myconfig.hpp</span></code> (see
section <a class="reference internal" href="#myconfig-hpp-activating-and-deactivating-features"><span class="std std-ref">myconfig.hpp: Activating and deactivating features</span></a>). To
activate <code class="docutils literal notranslate"><span class="pre">FEATURE</span></code>, add the following line to the header file:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#define FEATURE</span>
</pre></div>
</div>
<div class="section" id="general-features">
<span id="id16"></span><h3>2.4.1. General features<a class="headerlink" href="#general-features" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ELECTROSTATICS</span></code> This enables the use of the various electrostatics algorithms, such as P3M.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="electrostatics.html#electrostatics"><span class="std std-ref">Electrostatics</span></a></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MMM1D_GPU</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_P3M_GPU_FLOAT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DIPOLES</span></code> This activates the dipole-moment property of particles; In addition,
the various magnetostatics algorithms, such as P3M are switched on.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="magnetostatics.html#magnetostatics-dipolar-interactions"><span class="std std-ref">Magnetostatics / Dipolar interactions</span></a>
<a class="reference internal" href="electrostatics.html#electrostatics"><span class="std std-ref">Electrostatics</span></a></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SCAFACOS_DIPOLES</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ROTATION</span></code> Switch on rotational degrees of freedom for the particles, as well as
the corresponding quaternion integrator.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="particles.html#setting-up-particles"><span class="std std-ref">Setting up particles</span></a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note, that when the feature is activated, every particle has three
additional degrees of freedom, which for example means that the
kinetic energy changes at constant temperature is twice as large.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">LANGEVIN_PER_PARTICLE</span></code> Allows to choose the Langevin temperature and friction coefficient
per particle.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ROTATIONAL_INERTIA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EXTERNAL_FORCES</span></code> Allows to define an arbitrary constant force for each particle
individually. Also allows to fix individual coordinates of particles,
keep them at a fixed position or within a plane.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MASS</span></code> Allows particles to have individual masses. Note that some analysis
procedures have not yet been adapted to take the masses into account
correctly.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="espressomd.html#espressomd.particle_data.ParticleHandle.mass" title="espressomd.particle_data.ParticleHandle.mass"><code class="xref py py-attr docutils literal notranslate"><span class="pre">espressomd.particle_data.ParticleHandle.mass</span></code></a></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">EXCLUSIONS</span></code> Allows to exclude specific short ranged interactions within
molecules.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="espressomd.html#espressomd.particle_data.ParticleHandle.add_exclusion" title="espressomd.particle_data.ParticleHandle.add_exclusion"><code class="xref py py-meth docutils literal notranslate"><span class="pre">espressomd.particle_data.ParticleHandle.add_exclusion()</span></code></a></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">COMFIXED</span></code> Allows to fix the center of mass of all particles of a certain type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BOND_CONSTRAINT</span></code> Turns on the RATTLE integrator which allows for fixed lengths bonds
between particles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VIRTUAL_SITES_COM</span></code> Virtual sites are particles, the position and velocity of which is
not obtained by integrating equations of motion. Rather, they are
placed using the position (and orientation) of other particles. The
feature allows to place a virtual particle into the center of mass of
a set of other particles.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="particles.html#virtual-sites"><span class="std std-ref">Virtual sites</span></a></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">VIRTUAL_SITES_RELATIVE</span></code> Virtual sites are particles, the position and velocity of which is
not obtained by integrating equations of motion. Rather, they are
placed using the position (and orientation) of other particles. The
feature allows for rigid arrangements of particles.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="particles.html#virtual-sites"><span class="std std-ref">Virtual sites</span></a></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">METADYNAMICS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">COLLISION_DETECTION</span></code> Allows particles to be bound on collision.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">H5MD</span></code> Allows to write data to H5MD formatted hdf5 files.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="io.html#writing-h5md-files"><span class="std std-ref">Writing H5MD-files</span></a></p>
</div>
</li>
</ul>
<p>In addition, there are switches that enable additional features in the
integrator or thermostat:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">NPT</span></code> Enables an on-the-fly NPT integration scheme.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="system_setup.html#isotropic-npt-thermostat"><span class="std std-ref">Isotropic NPT thermostat</span></a></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEMBRANE_COLLISION</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">REACTION_ENSEMBLE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ENGINE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PARTICLE_ANISOTROPY</span></code></p></li>
</ul>
</div>
<div class="section" id="fluid-dynamics-and-fluid-structure-interaction">
<span id="id17"></span><h3>2.4.2. Fluid dynamics and fluid structure interaction<a class="headerlink" href="#fluid-dynamics-and-fluid-structure-interaction" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">DPD</span></code> Enables the dissipative particle dynamics thermostat and interaction.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="inter_non-bonded.html#dpd-interaction"><span class="std std-ref">DPD interaction</span></a></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">LB_BOUNDARIES</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LB_BOUNDARIES_GPU</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AFFINITY</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LB_ELECTROHYDRODYNAMICS</span></code> Enables the implicit calculation of electro-hydrodynamics for charged
particles and salt ions in an electric field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ELECTROKINETICS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EK_BOUNDARIES</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EK_DEBUG</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EK_DOUBLE_PREC</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OIF_LOCAL_FORCES</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OIF_GLOBAL_FORCES</span></code></p></li>
</ul>
</div>
<div class="section" id="interaction-features">
<span id="id18"></span><h3>2.4.3. Interaction features<a class="headerlink" href="#interaction-features" title="Permalink to this headline">¶</a></h3>
<p>The following switches turn on various short ranged interactions (see
section <a class="reference internal" href="inter_non-bonded.html#isotropic-non-bonded-interactions"><span class="std std-ref">Isotropic non-bonded interactions</span></a>):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TABULATED</span></code> Enable support for user-defined non-bonded interaction potentials.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LENNARD_JONES</span></code> Enable the Lennard-Jones potential.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LENNARD_JONES_GENERIC</span></code> Enable the generic Lennard-Jones potential with configurable
exponents and individual prefactors for the two terms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LJCOS</span></code> Enable the Lennard-Jones potential with a cosine-tail.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LJCOS2</span></code> Same as <code class="docutils literal notranslate"><span class="pre">LJCOS</span></code>, but using a slightly different way of smoothing the
connection to 0.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GAY_BERNE</span></code> (experimental)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HERTZIAN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NO_INTRA_NB</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MORSE</span></code> Enable the Morse potential.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BUCKINGHAM</span></code> Enable the Buckingham potential.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SOFT_SPHERE</span></code> Enable the soft sphere potential.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SMOOTH_STEP</span></code> Enable the smooth step potential, a step potential with two length
scales.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BMHTF_NACL</span></code> Enable the Born-Meyer-Huggins-Tosi-Fumi potential, which can be used
to model salt melts.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GAUSSIAN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HAT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UMBRELLA</span></code> (experimental)</p></li>
</ul>
<p>Some of the short-range interactions have additional features:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LJGEN_SOFTCORE</span></code> This modifies the generic Lennard-Jones potential
(<code class="docutils literal notranslate"><span class="pre">LENNARD_JONES_GENERIC</span></code>) with tunable parameters.</p></li>
</ul>
</div>
<div class="section" id="debug-messages">
<span id="id19"></span><h3>2.4.4. Debug messages<a class="headerlink" href="#debug-messages" title="Permalink to this headline">¶</a></h3>
<p>Finally, there is a flag for debugging:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ADDITIONAL_CHECKS</span></code> Enables numerous additional checks which can detect
inconsistencies especially in the cell systems. These checks are however
too slow to be enabled in production runs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because of a bug in OpenMPI versions 2.0-2.1, 3.0.0-3.0.2 and 3.1.0-3.1.2
that causes a segmentation fault when running the <em>ESPResSo</em> OpenGL visualizer
with feature <code class="docutils literal notranslate"><span class="pre">ADDITIONAL_CHECKS</span></code> enabled together with either
<code class="docutils literal notranslate"><span class="pre">ELECTROSTATICS</span></code> or <code class="docutils literal notranslate"><span class="pre">DIPOLES</span></code>, the subset of additional checks for
those two features are disabled if an unpatched version of OpenMPI is
detected during compilation.</p>
</div>
</li>
</ul>
</div>
<div class="section" id="features-marked-as-experimental">
<h3>2.4.5. Features marked as experimental<a class="headerlink" href="#features-marked-as-experimental" title="Permalink to this headline">¶</a></h3>
<p>Some of the above features are marked as EXPERIMENTAL. Activating these features can have unexpected side effects and some of them have known issues. If you activate any of these features, you should understand the corresponding source code and do extensive testing. Furthermore, it is necessary to define <code class="docutils literal notranslate"><span class="pre">EXPERIMENTAL_FEATURES</span></code> in <code class="file docutils literal notranslate"><span class="pre">myconfig.hpp</span></code>.</p>
</div>
<div class="section" id="cmake">
<span id="id20"></span><h3>2.4.6. cmake<a class="headerlink" href="#cmake" title="Permalink to this headline">¶</a></h3>
<p>In order to build the first step is to create a build directory in which
cmake can be executed. In cmake, the <em>source directory</em> (that contains
all the source files) is completely separated from the <em>build directory</em>
(where the files created by the build process are put). <code class="docutils literal notranslate"><span class="pre">cmake</span></code> is
designed to <em>not</em> be executed in the source directory. <code class="docutils literal notranslate"><span class="pre">cmake</span></code> will
determine how to use and where to find the compiler, as well as the
different libraries and tools required by the compilation process. By
having multiple build directories you can build several variants of <em>ESPResSo</em>,
each variant having different activated features, and for as many
platforms as you want.</p>
<p><strong>Example:</strong></p>
<p>When the source directory is <code class="file docutils literal notranslate"><span class="pre">srcdir</span></code> (the files where unpacked to this
directory), then the user can create a build directory <code class="file docutils literal notranslate"><span class="pre">build</span></code> below that
path by calling <code class="file docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">srcdir/build</span></code>. In the build directory <code class="docutils literal notranslate"><span class="pre">cmake</span></code> is to be
executed, followed by a call to make. None of the files in the source directory
are ever modified by the build process.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake ..
make
</pre></div>
</div>
<p>Afterwards <em>ESPResSo</em> can be run via calling <code class="file docutils literal notranslate"><span class="pre">./pypresso</span></code> from the command line.</p>
</div>
<div class="section" id="ccmake">
<span id="id21"></span><h3>2.4.7. ccmake<a class="headerlink" href="#ccmake" title="Permalink to this headline">¶</a></h3>
<p>Optionally and for easier use, the curses interface to cmake can be used
to configure <em>ESPResSo</em> interactively.</p>
<p><strong>Example:</strong></p>
<p>Alternatively to the previous example, instead of cmake, the ccmake executable
is called in the build directory to configure <em>ESPResSo</em>, followed by a call to make:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
ccmake ..
make
</pre></div>
</div>
<p>Fig. <a class="reference internal" href="#ccmake-figure"><span class="std std-ref">ccmake interface</span></a> shows the interactive ccmake UI.</p>
<div class="figure align-center" id="id32">
<span id="ccmake-figure"></span><a class="reference internal image-reference" href="_images/ccmake-example.png"><img alt="ccmake interface" src="_images/ccmake-example.png" style="width: 70.0%;" /></a>
<p class="caption"><span class="caption-text">ccmake interface</span><a class="headerlink" href="#id32" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="options-and-variables">
<span id="id22"></span><h3>2.4.8. Options and Variables<a class="headerlink" href="#options-and-variables" title="Permalink to this headline">¶</a></h3>
<p>The behavior of <em>ESPResSo</em> can be controlled by means of options and variables
in the <code class="file docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file. Also options are defined there. The following
options are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_CUDA</span></code>: Build with GPU support</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_HDF5</span></code>: Build with HDF5</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_TESTS</span></code>: Enable tests</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_SCAFACOS</span></code>: Build with Scafacos support</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_VALGRIND_INSTRUMENTATION</span></code>: Build with valgrind instrumentation
markers</p></li>
</ul>
<p>When the value in the <code class="file docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file is set to ON the corresponding
option is created if the value of the option is set to OFF the
corresponding option is not created. These options can also be modified
by calling <code class="docutils literal notranslate"><span class="pre">cmake</span></code> with the command line argument <code class="docutils literal notranslate"><span class="pre">-D</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -D <span class="nv">WITH_HDF5</span><span class="o">=</span>OFF srcdir
</pre></div>
</div>
<p>In the rare event when working with cmake and you want to have a totally
clean build (for example because you switched the compiler), remove the
build directory and create a new one.</p>
</div>
</div>
<div class="section" id="make-compiling-testing-and-installing">
<span id="id23"></span><h2>2.5. <code class="docutils literal notranslate"><span class="pre">make</span></code>: Compiling, testing and installing<a class="headerlink" href="#make-compiling-testing-and-installing" title="Permalink to this headline">¶</a></h2>
<p>The command <code class="docutils literal notranslate"><span class="pre">make</span></code> is mainly used to compile the source code, but it
can do a number of other things. The generic syntax of the <code class="docutils literal notranslate"><span class="pre">make</span></code>
command is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make <span class="o">[</span>options<span class="o">]</span> <span class="o">[</span>target<span class="o">]</span> <span class="o">[</span><span class="nv">variable</span><span class="o">=</span>value<span class="o">]</span>
</pre></div>
</div>
<p>When no target is given, the target <code class="docutils literal notranslate"><span class="pre">all</span></code> is used. The following
targets are available:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">all</span></code></dt><dd><p>Compiles the complete source code. The variable can be used to
specify the name of the configuration header to be used.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">check</span></code></dt><dd><p>Runs the testsuite. By default, all available tests will be run on
1, 2, 3, 4, 6, or 8 processors.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">clean</span></code></dt><dd><p>Deletes all files that were created during the compilation.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">install</span></code></dt><dd><p>Install <em>ESPResSo</em> in the path specified by the CMake variable
<code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code>. The path can be changed by calling CMake
with <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">..</span> <span class="pre">-DCMAKE_INSTALL_PREFIX=/path/to/espresso</span></code>. Do not use
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">DESTDIR=/path/to/espresso</span> <span class="pre">install</span></code> to install to a specific path,
this will cause issues with the runtime path (RPATH) and will conflict
with the CMake variable <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code> if it has been set.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">doxygen</span></code></dt><dd><p>Creates the Doxygen code documentation in the <code class="file docutils literal notranslate"><span class="pre">doc/doxygen</span></code>
subdirectory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sphinx</span></code></dt><dd><p>Creates the <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> code documentation in the <code class="file docutils literal notranslate"><span class="pre">doc/sphinx</span></code>
subdirectory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tutorials</span></code></dt><dd><p>Creates the tutorials in the <code class="file docutils literal notranslate"><span class="pre">doc/tutorials</span></code> subdirectory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">doc</span></code></dt><dd><p>Creates all documentation in the <code class="file docutils literal notranslate"><span class="pre">doc</span></code> subdirectory (only when
using the development sources).</p>
</dd>
</dl>
<p>A number of options are available when calling <code class="docutils literal notranslate"><span class="pre">make</span></code>. The most
interesting option is probably <code class="docutils literal notranslate"><span class="pre">-j</span> <span class="pre">num_jobs</span></code>, which can be used for
parallel compilation on computers that have more than one CPU or core.
<em>num_jobs</em> specifies the maximal number of jobs that will be run.
Setting <em>num_jobs</em> to the number of available processors speeds up the
compilation process significantly.</p>
</div>
<div class="section" id="running-es">
<span id="id24"></span><h2>2.6. Running <em>ESPResSo</em><a class="headerlink" href="#running-es" title="Permalink to this headline">¶</a></h2>
<p><em>ESPResSo</em> is implemented as a Python module. This means that you need to write a
python script for any task you want to perform with <em>ESPResSo</em>. In this chapter,
the basic structure of the interface will be explained. For a practical
introduction, see the tutorials, which are also part of the
distribution. To use <em>ESPResSo</em>, you need to import the espressomd module in your
Python script. To this end, the folder containing the python module
needs to be in the Python search path. The module is located in the
<code class="file docutils literal notranslate"><span class="pre">src/python</span></code> folder under the build directory. A convenient way to run
python with the correct path is to use the pypresso script located in
the build directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./pypresso simulation.py
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pypresso</span></code> script is just a wrapper in order to expose the <em>ESPResSo</em> python
module to the system’s python interpreter by modifying the <code class="docutils literal notranslate"><span class="pre">$PYTHONPATH</span></code>.
Please see the following chapter <a class="reference internal" href="system_setup.html#setting-up-the-system"><span class="std std-ref">Setting up the system</span></a> describing how
to actually write a simulation script for <em>ESPResSo</em>.</p>
<p>Running the Jupyter interpreter requires using the <code class="docutils literal notranslate"><span class="pre">ipypresso</span></code> script, which
is also located in the build directory (its name comes from the IPython
interpreter, today known as Jupyter). To run the tutorials, you will need
to start the Jupyter interpreter in notebook mode:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> doc/tutorials
../../ipypresso notebook
</pre></div>
</div>
<p>You may then browse through the different tutorial folders. Files whose name
ends with extension .ipynb can be opened in the browser. Click on the Run
button to execute the current block, or use the keyboard shortcut Shift+Enter.
If the current block is a code block, the <code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[</span> <span class="pre">]</span></code> label to the left will
change to <code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[*]</span></code> while the code is being executed, and become <code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[1]</span></code>
once the execution has completed. The number increments itself every time a
code cell is executed. This bookkeeping is extremely useful when modifying
previous code cells, as it shows which cells are out-of-date. It’s also
possible to run all cells by clicking on the “Run” drop-down menu, then on
“Run All Below”. This will change all labels to <code class="docutils literal notranslate"><span class="pre">In</span> <span class="pre">[*]</span></code> to show that the
first one is running, while the subsequent ones are awaiting execution.
You’ll also see that many cells generate an output. When the output becomes
very long, Jupyter will automatically put it in a box with a vertical scrollbar.
The output may also contain static plots, dynamic plots and videos. It is also
possible to start a 3D visualizer in a new window, however closing the window
will exit the Python interpreter and Jupyter will notify you that the current
Python kernel stopped. If a cell takes too long to execute, you may interrupt
it with the stop button.</p>
<p>To close the Jupyter notebook, go to the terminal where it was started and use
the keyboard shortcut Ctrl+C twice.</p>
<p>When starting the Jupyter interpreter in notebook mode, you may see the
following warning in the terminal:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[TerminalIPythonApp] WARNING | Subcommand `ipython notebook` is deprecated and will be removed in future versions.
[TerminalIPythonApp] WARNING | You likely want to use `jupyter notebook` in the future
</pre></div>
</div>
<p>This only means <em>ESPResSo</em> was compiled with IPython instead of Jupyter. If Jupyter
is installed on your system, the notebook will automatically close IPython and
start Jupyter. To recompile <em>ESPResSo</em> with Jupyter, provide <code class="docutils literal notranslate"><span class="pre">cmake</span></code> with the flag
<code class="docutils literal notranslate"><span class="pre">-DIPYTHON_EXECUTABLE=$(which</span> <span class="pre">jupyter)</span></code>.</p>
<p>You can find the official Jupyter documentation at
<a class="reference external" href="https://jupyter.readthedocs.io/en/latest/running.html">https://jupyter.readthedocs.io/en/latest/running.html</a></p>
</div>
<div class="section" id="debugging-es">
<span id="id25"></span><h2>2.7. Debugging <em>ESPResSo</em><a class="headerlink" href="#debugging-es" title="Permalink to this headline">¶</a></h2>
<p>Exceptional situations occur in every program.  If <em>ESPResSo</em> crashes with a
segmentation fault, that means that there was a memory fault in the
simulation core which requires running the program in a debugger.  The
<code class="docutils literal notranslate"><span class="pre">pypresso</span></code> executable file is actually not a program but a script
which sets the Python path appropriately and starts the Python
interpreter with your arguments.  Thus it is not possible to directly
run <code class="docutils literal notranslate"><span class="pre">pypresso</span></code> in a debugger.  However, we provide some useful
command line options for the most common tools.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./pypresso --tool &lt;args&gt;
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">--tool</span></code> can be any from the following table.  You can only
use one tool at a time.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tool</p></th>
<th class="head"><p>Effect</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--gdb</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">gdb</span> <span class="pre">--args</span> <span class="pre">python</span> <span class="pre">&lt;args&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--lldb</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">lldb</span> <span class="pre">--</span> <span class="pre">python</span> <span class="pre">&lt;args&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--valgrind</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">valgrind</span> <span class="pre">--leak-check=full</span> <span class="pre">python</span> <span class="pre">&lt;args&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--cuda-gdb</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cuda-gdb</span> <span class="pre">--args</span> <span class="pre">python</span> <span class="pre">&lt;args&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--cuda-memcheck</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cuda-memcheck</span> <span class="pre">python</span> <span class="pre">&lt;args&gt;</span></code></p></td>
</tr>
</tbody>
</table>
<dl class="footnote brackets">
<dt class="label" id="id26"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p><a class="reference external" href="http://espressomd.org">http://espressomd.org</a></p>
</dd>
<dt class="label" id="id27"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p><a class="reference external" href="http://git.org">http://git.org</a></p>
</dd>
<dt class="label" id="id28"><span class="brackets"><a class="fn-backref" href="#id4">3</a></span></dt>
<dd><p><a class="reference external" href="https://github.com/espressomd/espresso">https://github.com/espressomd/espresso</a></p>
</dd>
<dt class="label" id="id29"><span class="brackets"><a class="fn-backref" href="#id5">4</a></span></dt>
<dd><p><a class="reference external" href="https://cmake.org/">https://cmake.org/</a></p>
</dd>
<dt class="label" id="id30"><span class="brackets"><a class="fn-backref" href="#id7">5</a></span></dt>
<dd><p><a class="reference external" href="http://www.fftw.org/">http://www.fftw.org/</a></p>
</dd>
<dt class="label" id="id31"><span class="brackets"><a class="fn-backref" href="#id11">6</a></span></dt>
<dd><p><a class="reference external" href="https://developer.nvidia.com/cuda-downloads">https://developer.nvidia.com/cuda-downloads</a></p>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Installation</a><ul>
<li><a class="reference internal" href="#requirements">2.1. Requirements</a><ul>
<li><a class="reference internal" href="#installing-requirements-on-ubuntu-linux">2.1.1. Installing requirements on Ubuntu Linux</a></li>
<li><a class="reference internal" href="#installing-requirements-on-other-linux-distributions">2.1.2. Installing requirements on other Linux distributions</a></li>
<li><a class="reference internal" href="#installing-requirements-on-mac-os-x">2.1.3. Installing requirements on Mac OS X</a></li>
</ul>
</li>
<li><a class="reference internal" href="#quick-installation">2.2. Quick installation</a></li>
<li><a class="reference internal" href="#configuring">2.3. Configuring</a><ul>
<li><a class="reference internal" href="#myconfig-hpp-activating-and-deactivating-features">2.3.1. <code class="file docutils literal notranslate"><span class="pre">myconfig.hpp</span></code>: Activating and deactivating features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features">2.4. Features</a><ul>
<li><a class="reference internal" href="#general-features">2.4.1. General features</a></li>
<li><a class="reference internal" href="#fluid-dynamics-and-fluid-structure-interaction">2.4.2. Fluid dynamics and fluid structure interaction</a></li>
<li><a class="reference internal" href="#interaction-features">2.4.3. Interaction features</a></li>
<li><a class="reference internal" href="#debug-messages">2.4.4. Debug messages</a></li>
<li><a class="reference internal" href="#features-marked-as-experimental">2.4.5. Features marked as experimental</a></li>
<li><a class="reference internal" href="#cmake">2.4.6. cmake</a></li>
<li><a class="reference internal" href="#ccmake">2.4.7. ccmake</a></li>
<li><a class="reference internal" href="#options-and-variables">2.4.8. Options and Variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#make-compiling-testing-and-installing">2.5. <code class="docutils literal notranslate"><span class="pre">make</span></code>: Compiling, testing and installing</a></li>
<li><a class="reference internal" href="#running-es">2.6. Running <em>ESPResSo</em></a></li>
<li><a class="reference internal" href="#debugging-es">2.7. Debugging <em>ESPResSo</em></a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="system_setup.html" title="3. Setting up the system"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="1. Introduction"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ESPResSo doc</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ug.html" >&lt;no title&gt;</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018-2019, The ESPResSo project.
      Last updated on Dec 13, 2019.
    </div>
  </body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESPResSo: ghosts.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_100x100.png"/></td>
  <td id="projectalign">
   <div id="projectname">ESPResSo
   </div>
   <div id="projectbrief">Extensible Simulation Package for Research on Soft Matter Systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ghosts_8hpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ghosts.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Ghost particles and particle exchange.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="config_8hpp_source.html">config/config.hpp</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="BoxGeometry_8hpp_source.html">BoxGeometry.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="core_2ParticleList_8hpp_source.html">ParticleList.hpp</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="Vector_8hpp_source.html">utils/Vector.hpp</a>&gt;</code><br />
<code>#include &lt;boost/mpi/communicator.hpp&gt;</code><br />
<code>#include &lt;cstddef&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for ghosts.hpp:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="ghosts_8hpp__incl.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="ghosts_8hpp__dep__incl.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div>
<p><a href="ghosts_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structGhostCommunication.html">GhostCommunication</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structGhostCommunicator.html">GhostCommunicator</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Properties for a ghost communication.  <a href="structGhostCommunicator.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Transfer types, for \ref GhostCommunicator::type</div></td></tr>
<tr class="memitem:ae75ec763dddd906eb8463ee76dfe40ea" id="r_ae75ec763dddd906eb8463ee76dfe40ea"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ghosts_8hpp.html#ae75ec763dddd906eb8463ee76dfe40ea">GHOST_SEND</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ae75ec763dddd906eb8463ee76dfe40ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">send to a single node  <br /></td></tr>
<tr class="separator:ae75ec763dddd906eb8463ee76dfe40ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14c4461408070727a0b592a6422925bb" id="r_a14c4461408070727a0b592a6422925bb"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ghosts_8hpp.html#a14c4461408070727a0b592a6422925bb">GHOST_RECV</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a14c4461408070727a0b592a6422925bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">recv from a single node  <br /></td></tr>
<tr class="separator:a14c4461408070727a0b592a6422925bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad628a413b638a7aaf110fa5a4fddd021" id="r_ad628a413b638a7aaf110fa5a4fddd021"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ghosts_8hpp.html#ad628a413b638a7aaf110fa5a4fddd021">GHOST_BCST</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ad628a413b638a7aaf110fa5a4fddd021"><td class="mdescLeft">&#160;</td><td class="mdescRight">broadcast, the node entry gives the sender  <br /></td></tr>
<tr class="separator:ad628a413b638a7aaf110fa5a4fddd021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86efa26c4d4ee23fd5d3b619a58b33dd" id="r_a86efa26c4d4ee23fd5d3b619a58b33dd"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ghosts_8hpp.html#a86efa26c4d4ee23fd5d3b619a58b33dd">GHOST_RDCE</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:a86efa26c4d4ee23fd5d3b619a58b33dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">reduce, the node entry gives the receiver  <br /></td></tr>
<tr class="separator:a86efa26c4d4ee23fd5d3b619a58b33dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba1346f0f9b234a82a7ad414cf432096" id="r_aba1346f0f9b234a82a7ad414cf432096"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ghosts_8hpp.html#aba1346f0f9b234a82a7ad414cf432096">GHOST_LOCL</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:aba1346f0f9b234a82a7ad414cf432096"><td class="mdescLeft">&#160;</td><td class="mdescRight">transfer data from cell to cell on this node  <br /></td></tr>
<tr class="separator:aba1346f0f9b234a82a7ad414cf432096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a543d1e590e05260099cf47d345ef2e35" id="r_a543d1e590e05260099cf47d345ef2e35"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ghosts_8hpp.html#a543d1e590e05260099cf47d345ef2e35">GHOST_JOBMASK</a>&#160;&#160;&#160;15</td></tr>
<tr class="memdesc:a543d1e590e05260099cf47d345ef2e35"><td class="mdescLeft">&#160;</td><td class="mdescRight">mask to the job area of the transfer type  <br /></td></tr>
<tr class="separator:a543d1e590e05260099cf47d345ef2e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6980d757938fdb5a614d6d1bb5bfce2" id="r_af6980d757938fdb5a614d6d1bb5bfce2"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ghosts_8hpp.html#af6980d757938fdb5a614d6d1bb5bfce2">GHOST_PREFETCH</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:af6980d757938fdb5a614d6d1bb5bfce2"><td class="mdescLeft">&#160;</td><td class="mdescRight">additional flag for prefetching  <br /></td></tr>
<tr class="separator:af6980d757938fdb5a614d6d1bb5bfce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cf1eeceba9e2689d4748c159bcf24d8" id="r_a2cf1eeceba9e2689d4748c159bcf24d8"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ghosts_8hpp.html#a2cf1eeceba9e2689d4748c159bcf24d8">GHOST_PSTSTORE</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:a2cf1eeceba9e2689d4748c159bcf24d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">additional flag for poststoring  <br /></td></tr>
<tr class="separator:a2cf1eeceba9e2689d4748c159bcf24d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ae45322320d6e3f7bbc339c548e011471" id="r_ae45322320d6e3f7bbc339c548e011471"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">: unsigned { <br />
&#160;&#160;<a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471aa61e706389061ee0edd67d03ab4f13eb">GHOSTTRANS_NONE</a> = 0u
, <a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a7f7394c7454e01a80a0f455bd44e580e">GHOSTTRANS_PROPRTS</a> = 1u
, <a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a6dacbd0f1ec9aab0412c7d6ce7aa8a63">GHOSTTRANS_POSITION</a> = 2u
, <a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a01d187cc29ee69bdade5fa979603052b">GHOSTTRANS_MOMENTUM</a> = 8u
, <br />
&#160;&#160;<a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a9097200ec23dda5b929c946f2b6276b8">GHOSTTRANS_FORCE</a> = 16u
, <a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a2133049e8f1853a55739f85c2d5471d4">GHOSTTRANS_RATTLE</a> = 32u
, <a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a5e61fe3d270b9ee836af00020b0c3416">GHOSTTRANS_PARTNUM</a> = 64u
, <a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471ad75d28f8081b2f688b91f4453b9a983c">GHOSTTRANS_BONDS</a> = 128u
<br />
 }</td></tr>
<tr class="memdesc:ae45322320d6e3f7bbc339c548e011471"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfer data classes, for <a class="el" href="ghosts_8cpp.html#ae720e2ee3b90422770140fcc58f4c037">ghost_communicator</a>.  <a href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471">More...</a><br /></td></tr>
<tr class="separator:ae45322320d6e3f7bbc339c548e011471"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae720e2ee3b90422770140fcc58f4c037" id="r_ae720e2ee3b90422770140fcc58f4c037"><td class="memItemLeft" align="right" valign="top"><a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ghosts_8hpp.html#ae720e2ee3b90422770140fcc58f4c037">ghost_communicator</a> (<a class="el" href="structGhostCommunicator.html">GhostCommunicator</a> <a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">const</a> &amp;<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">gcr</a>, <a class="el" href="classBoxGeometry.html">BoxGeometry</a> <a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">const</a> &amp;box_geo, <a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">unsigned</a> <a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">int</a> <a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">data_parts</a>)</td></tr>
<tr class="memdesc:ae720e2ee3b90422770140fcc58f4c037"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a ghost communication with the specified data parts.  <br /></td></tr>
<tr class="separator:ae720e2ee3b90422770140fcc58f4c037"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Ghost particles and particle exchange. </p>
<p>In this file you find everything concerning the exchange of particle data (particles, ghosts, positions and forces) for short range interactions between the spatial domains of neighboring nodes.</p>
<h2>How does this work </h2>
<p>The ghost communication transfers data from cells on one node to cells on another node during the integration process. Note that data can only be transferred from one cell to one other, and the contents of the other cell will be overwritten.</p>
<p>The particle data that has to be transferred, and especially from where to where, heavily depends on the cell system. In ESPResSo, this is abstracted in form of ghost communicators (<a class="el" href="structGhostCommunicator.html">GhostCommunicator</a>) and ghost communications (<a class="el" href="structGhostCommunication.html">GhostCommunication</a>). The ghost communicators represent the four communications above and consist of the data to transfer (which is determined by their type) and a list of ghost communications. The data types are described by the particle data classes:</p><ul>
<li><a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a7f7394c7454e01a80a0f455bd44e580e">GHOSTTRANS_PROPRTS</a> transfers the <a class="el" href="structParticleProperties.html">ParticleProperties</a></li>
<li><a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a6dacbd0f1ec9aab0412c7d6ce7aa8a63">GHOSTTRANS_POSITION</a> transfers the <a class="el" href="structParticlePosition.html">ParticlePosition</a></li>
<li><a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a01d187cc29ee69bdade5fa979603052b">GHOSTTRANS_MOMENTUM</a> transfers the <a class="el" href="structParticleMomentum.html">ParticleMomentum</a></li>
<li><a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a9097200ec23dda5b929c946f2b6276b8">GHOSTTRANS_FORCE</a> transfers the <a class="el" href="structParticleForce.html">ParticleForce</a></li>
<li><a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a2133049e8f1853a55739f85c2d5471d4">GHOSTTRANS_RATTLE</a> transfers the <a class="el" href="structParticleRattle.html">ParticleRattle</a></li>
<li><a class="el" href="ghosts_8hpp.html#ae45322320d6e3f7bbc339c548e011471a5e61fe3d270b9ee836af00020b0c3416">GHOSTTRANS_PARTNUM</a> transfers the cell sizes</li>
</ul>
<p>Each ghost communication describes a single communication of the local with another node (or all other nodes). The data transferred can be any number of cells, there are five communication types:</p><ul>
<li><a class="el" href="ghosts_8hpp.html#ae75ec763dddd906eb8463ee76dfe40ea">GHOST_SEND</a> sends data to one other node</li>
<li><a class="el" href="ghosts_8hpp.html#a14c4461408070727a0b592a6422925bb">GHOST_RECV</a> recvs data from one other node. In the case of forces, they are added up, everything else is overwritten</li>
<li><a class="el" href="ghosts_8hpp.html#ad628a413b638a7aaf110fa5a4fddd021">GHOST_BCST</a> sends data to all nodes</li>
<li><a class="el" href="ghosts_8hpp.html#a86efa26c4d4ee23fd5d3b619a58b33dd">GHOST_RDCE</a> recvs data from all nodes. In the case of forces, they are added up, everything else is overwritten</li>
<li><a class="el" href="ghosts_8hpp.html#aba1346f0f9b234a82a7ad414cf432096">GHOST_LOCL</a> transfer data from a local cell to another local cell. In this case, the first half of the cells are the sending cells, the other half are the corresponding receivers.</li>
</ul>
<p>Note that for the first four communications you have to make sure that when one node sends to another, that the sender has <a class="el" href="ghosts_8hpp.html#ae75ec763dddd906eb8463ee76dfe40ea">GHOST_SEND</a> and the receiver <a class="el" href="ghosts_8hpp.html#a14c4461408070727a0b592a6422925bb">GHOST_RECV</a>. In the case of <a class="el" href="ghosts_8hpp.html#ad628a413b638a7aaf110fa5a4fddd021">GHOST_BCST</a> resp. <a class="el" href="ghosts_8hpp.html#a86efa26c4d4ee23fd5d3b619a58b33dd">GHOST_RDCE</a>, all nodes have to have the same communication type and the same master sender/receiver (just like the MPI commands).</p>
<p>A special topic are <a class="el" href="ghosts_8hpp.html#af6980d757938fdb5a614d6d1bb5bfce2">GHOST_PREFETCH</a> and <a class="el" href="ghosts_8hpp.html#a2cf1eeceba9e2689d4748c159bcf24d8">GHOST_PSTSTORE</a>. For example, if all nodes broadcast to the other, the naive implementation will be that <code>n_nodes</code> times a <a class="el" href="ghosts_8hpp.html#ad628a413b638a7aaf110fa5a4fddd021">GHOST_BCST</a> is done with different master nodes. But this means that each time <code>n_nodes - 1</code> nodes wait for the master to construct its send buffer. Therefore there is the prefetch flag which can be set on a pair of recv/send operations. If the ghost communication reaches a recv operation with prefetch, the next send operation (which must have the prefetch set!!) is searched and the send buffer already created. When sending, this precreated send buffer is used. In the scenario above, all nodes create the send buffers simultaneously in the first communication step, thereby reducing the latency a little bit. The pststore is similar and postpones the write back of received data until a send operation (with a precreated send buffer) is finished.</p>
<p>The ghost communicators are created by the cell systems. </p>

<p class="definition">Definition in file <a class="el" href="ghosts_8hpp_source.html">ghosts.hpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad628a413b638a7aaf110fa5a4fddd021" name="ad628a413b638a7aaf110fa5a4fddd021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad628a413b638a7aaf110fa5a4fddd021">&#9670;&#160;</a></span>GHOST_BCST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a> GHOST_BCST&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>broadcast, the node entry gives the sender </p>

<p class="definition">Definition at line <a class="el" href="ghosts_8hpp_source.html#l00110">110</a> of file <a class="el" href="ghosts_8hpp_source.html">ghosts.hpp</a>.</p>

</div>
</div>
<a id="a543d1e590e05260099cf47d345ef2e35" name="a543d1e590e05260099cf47d345ef2e35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a543d1e590e05260099cf47d345ef2e35">&#9670;&#160;</a></span>GHOST_JOBMASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a> GHOST_JOBMASK&#160;&#160;&#160;15</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mask to the job area of the transfer type </p>

<p class="definition">Definition at line <a class="el" href="ghosts_8hpp_source.html#l00117">117</a> of file <a class="el" href="ghosts_8hpp_source.html">ghosts.hpp</a>.</p>

</div>
</div>
<a id="aba1346f0f9b234a82a7ad414cf432096" name="aba1346f0f9b234a82a7ad414cf432096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba1346f0f9b234a82a7ad414cf432096">&#9670;&#160;</a></span>GHOST_LOCL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a> GHOST_LOCL&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>transfer data from cell to cell on this node </p>

<p class="definition">Definition at line <a class="el" href="ghosts_8hpp_source.html#l00114">114</a> of file <a class="el" href="ghosts_8hpp_source.html">ghosts.hpp</a>.</p>

</div>
</div>
<a id="af6980d757938fdb5a614d6d1bb5bfce2" name="af6980d757938fdb5a614d6d1bb5bfce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6980d757938fdb5a614d6d1bb5bfce2">&#9670;&#160;</a></span>GHOST_PREFETCH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a> GHOST_PREFETCH&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>additional flag for prefetching </p>

<p class="definition">Definition at line <a class="el" href="ghosts_8hpp_source.html#l00119">119</a> of file <a class="el" href="ghosts_8hpp_source.html">ghosts.hpp</a>.</p>

</div>
</div>
<a id="a2cf1eeceba9e2689d4748c159bcf24d8" name="a2cf1eeceba9e2689d4748c159bcf24d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cf1eeceba9e2689d4748c159bcf24d8">&#9670;&#160;</a></span>GHOST_PSTSTORE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a> GHOST_PSTSTORE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>additional flag for poststoring </p>

<p class="definition">Definition at line <a class="el" href="ghosts_8hpp_source.html#l00121">121</a> of file <a class="el" href="ghosts_8hpp_source.html">ghosts.hpp</a>.</p>

</div>
</div>
<a id="a86efa26c4d4ee23fd5d3b619a58b33dd" name="a86efa26c4d4ee23fd5d3b619a58b33dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86efa26c4d4ee23fd5d3b619a58b33dd">&#9670;&#160;</a></span>GHOST_RDCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a> GHOST_RDCE&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>reduce, the node entry gives the receiver </p>

<p class="definition">Definition at line <a class="el" href="ghosts_8hpp_source.html#l00112">112</a> of file <a class="el" href="ghosts_8hpp_source.html">ghosts.hpp</a>.</p>

</div>
</div>
<a id="a14c4461408070727a0b592a6422925bb" name="a14c4461408070727a0b592a6422925bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14c4461408070727a0b592a6422925bb">&#9670;&#160;</a></span>GHOST_RECV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a> GHOST_RECV&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>recv from a single node </p>

<p class="definition">Definition at line <a class="el" href="ghosts_8hpp_source.html#l00108">108</a> of file <a class="el" href="ghosts_8hpp_source.html">ghosts.hpp</a>.</p>

</div>
</div>
<a id="ae75ec763dddd906eb8463ee76dfe40ea" name="ae75ec763dddd906eb8463ee76dfe40ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae75ec763dddd906eb8463ee76dfe40ea">&#9670;&#160;</a></span>GHOST_SEND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">define</a> GHOST_SEND&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send to a single node </p>

<p class="definition">Definition at line <a class="el" href="ghosts_8hpp_source.html#l00106">106</a> of file <a class="el" href="ghosts_8hpp_source.html">ghosts.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ae45322320d6e3f7bbc339c548e011471" name="ae45322320d6e3f7bbc339c548e011471"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae45322320d6e3f7bbc339c548e011471">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">anonymous</a> <a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">enum</a> : <a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">unsigned</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transfer data classes, for <a class="el" href="ghosts_8cpp.html#ae720e2ee3b90422770140fcc58f4c037">ghost_communicator</a>. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ae45322320d6e3f7bbc339c548e011471aa61e706389061ee0edd67d03ab4f13eb" name="ae45322320d6e3f7bbc339c548e011471aa61e706389061ee0edd67d03ab4f13eb"></a>GHOSTTRANS_NONE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae45322320d6e3f7bbc339c548e011471a7f7394c7454e01a80a0f455bd44e580e" name="ae45322320d6e3f7bbc339c548e011471a7f7394c7454e01a80a0f455bd44e580e"></a>GHOSTTRANS_PROPRTS&#160;</td><td class="fielddoc"><p>transfer <a class="el" href="structParticleProperties.html">ParticleProperties</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="ae45322320d6e3f7bbc339c548e011471a6dacbd0f1ec9aab0412c7d6ce7aa8a63" name="ae45322320d6e3f7bbc339c548e011471a6dacbd0f1ec9aab0412c7d6ce7aa8a63"></a>GHOSTTRANS_POSITION&#160;</td><td class="fielddoc"><p>transfer <a class="el" href="structParticlePosition.html">ParticlePosition</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="ae45322320d6e3f7bbc339c548e011471a01d187cc29ee69bdade5fa979603052b" name="ae45322320d6e3f7bbc339c548e011471a01d187cc29ee69bdade5fa979603052b"></a>GHOSTTRANS_MOMENTUM&#160;</td><td class="fielddoc"><p>transfer <a class="el" href="structParticleMomentum.html">ParticleMomentum</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="ae45322320d6e3f7bbc339c548e011471a9097200ec23dda5b929c946f2b6276b8" name="ae45322320d6e3f7bbc339c548e011471a9097200ec23dda5b929c946f2b6276b8"></a>GHOSTTRANS_FORCE&#160;</td><td class="fielddoc"><p>transfer <a class="el" href="structParticleForce.html">ParticleForce</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="ae45322320d6e3f7bbc339c548e011471a2133049e8f1853a55739f85c2d5471d4" name="ae45322320d6e3f7bbc339c548e011471a2133049e8f1853a55739f85c2d5471d4"></a>GHOSTTRANS_RATTLE&#160;</td><td class="fielddoc"><p>transfer <a class="el" href="structParticleRattle.html">ParticleRattle</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="ae45322320d6e3f7bbc339c548e011471a5e61fe3d270b9ee836af00020b0c3416" name="ae45322320d6e3f7bbc339c548e011471a5e61fe3d270b9ee836af00020b0c3416"></a>GHOSTTRANS_PARTNUM&#160;</td><td class="fielddoc"><p>resize the receiver particle arrays to the size of the senders </p>
</td></tr>
<tr><td class="fieldname"><a id="ae45322320d6e3f7bbc339c548e011471ad75d28f8081b2f688b91f4453b9a983c" name="ae45322320d6e3f7bbc339c548e011471ad75d28f8081b2f688b91f4453b9a983c"></a>GHOSTTRANS_BONDS&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="ghosts_8hpp_source.html#l00125">125</a> of file <a class="el" href="ghosts_8hpp_source.html">ghosts.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae720e2ee3b90422770140fcc58f4c037" name="ae720e2ee3b90422770140fcc58f4c037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae720e2ee3b90422770140fcc58f4c037">&#9670;&#160;</a></span>ghost_communicator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">void</a> ghost_communicator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structGhostCommunicator.html">GhostCommunicator</a> <a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">const</a> &amp;&#160;</td>
          <td class="paramname"><em>gcr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBoxGeometry.html">BoxGeometry</a> <a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">const</a> &amp;&#160;</td>
          <td class="paramname"><em>box_geo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">unsigned</a> <a class="el" href="common__cuda_8cu.html#a2edcfbb6549e85581562bf5ed89d2008">int</a>&#160;</td>
          <td class="paramname"><em>data_parts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a ghost communication with the specified data parts. </p>

<p class="definition">Definition at line <a class="el" href="ghosts_8cpp_source.html#l00443">443</a> of file <a class="el" href="ghosts_8cpp_source.html">ghosts.cpp</a>.</p>

<p class="reference">References <a class="el" href="ghosts_8cpp_source.html#l00365">add_forces_from_recv_buffer()</a>, <a class="el" href="ghosts_8cpp_source.html#l00351">add_rattle_correction_from_recv_buffer()</a>, <a class="el" href="ghosts_8cpp_source.html#l00230">calc_transmit_size()</a>, <a class="el" href="ghosts_8cpp_source.html#l00378">cell_cell_transfer()</a>, <a class="el" href="ghosts_8hpp_source.html#l00110">GHOST_BCST</a>, <a class="el" href="ghosts_8hpp_source.html#l00117">GHOST_JOBMASK</a>, <a class="el" href="ghosts_8hpp_source.html#l00114">GHOST_LOCL</a>, <a class="el" href="ghosts_8hpp_source.html#l00119">GHOST_PREFETCH</a>, <a class="el" href="ghosts_8hpp_source.html#l00121">GHOST_PSTSTORE</a>, <a class="el" href="ghosts_8hpp_source.html#l00112">GHOST_RDCE</a>, <a class="el" href="ghosts_8hpp_source.html#l00108">GHOST_RECV</a>, <a class="el" href="ghosts_8hpp_source.html#l00106">GHOST_SEND</a>, <a class="el" href="ghosts_8hpp_source.html#l00134">GHOSTTRANS_FORCE</a>, <a class="el" href="ghosts_8hpp_source.html#l00126">GHOSTTRANS_NONE</a>, <a class="el" href="ghosts_8hpp_source.html#l00137">GHOSTTRANS_RATTLE</a>, <a class="el" href="ghosts_8cpp_source.html#l00421">is_recv_op()</a>, <a class="el" href="ghosts_8cpp_source.html#l00416">is_send_op()</a>, <a class="el" href="ghosts_8cpp_source.html#l00300">prepare_recv_buffer()</a>, <a class="el" href="ghosts_8cpp_source.html#l00252">prepare_send_buffer()</a>, <a class="el" href="ghosts_8cpp_source.html#l00310">put_recv_buffer()</a>, <a class="el" href="ghosts_8cpp_source.html#l00058">REQ_GHOST_SEND</a>, <a class="el" href="common__cuda_8cu_source.html#l00034">stream</a>, and <a class="el" href="communication_8cpp_source.html#l00073">this_node</a>.</p>

<p class="reference">Referenced by <a class="el" href="CellStructure_8cpp_source.html#l00377">CellStructure::ghosts_count()</a>, <a class="el" href="CellStructure_8cpp_source.html#l00385">CellStructure::ghosts_reduce_forces()</a>, <a class="el" href="CellStructure_8cpp_source.html#l00390">CellStructure::ghosts_reduce_rattle_correction()</a>, <a class="el" href="CellStructure_8cpp_source.html#l00381">CellStructure::ghosts_update()</a>, and <a class="el" href="HybridDecomposition_8cpp_source.html#l00095">HybridDecomposition::resort()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_aebb8dcc11953d78e620bbef0b9e2183.html">core</a></li><li class="navelem"><a class="el" href="ghosts_8hpp.html">ghosts.hpp</a></li>
    <li class="footer">Generated on Sun Feb 22 2026 02:36:16 for ESPResSo by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
